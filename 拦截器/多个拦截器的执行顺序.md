---
up:
  - "[[Spring MVC 課程描述]]"
---
# 若每个拦截器的 preHandle() 都返回 true

此时多个拦截器的执行顺序和拦截器在 SpringMVC 的配置文件的配置顺序有关：

`preHandle()`会按照配置的顺序执行，而`postHandle()`和`afterComplation()`会按照配置的反序执行

配置顺序

```xml
<mvc:interceptors>
    <ref bean="myInterceptor"></ref>
    <ref bean="myInterceptor2"></ref>
</mvc:interceptors>
```

后台日志信息

```shell
MyInterceptor==>preHandle
MyInterceptor2==>preHandle
MyInterceptor2==>postHandle
MyInterceptor==>postHandle
MyInterceptor2==>afterCompletion
MyInterceptor==>afterCompletion
```

可以看出，`preHandle`顺序执行，`postHandle`和`afterCompletion`反序执行

---

# 若某个拦截器的 preHandle() 返回了 false

`preHandle()`返回 false 和它之前的拦截器的`preHandle()`都会执行，`postHandle()`都不执行，返回 false 的拦截器之前的拦截器的`afterComplation()`会执行

后台测试代码

```java
@Component
public class MyInterceptor2 implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        System.out.println("MyInterceptor2==>preHandle");
        return false;
    }
    // 略同
}
```

后台日志信息

```shell
MyInterceptor==>preHandle
MyInterceptor2==>preHandle
MyInterceptor==>afterCompletion
```

---