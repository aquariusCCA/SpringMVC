---
up:
  - "[[Spring MVC 課程描述]]"
  - "[[RESTful 简介]]"
  - "[[使用 RESTful 模拟操作用户资源]]"
---
# **配置文件**

`web.xml`配置`HiddenHttpMethodFilter`过滤器

```xml
<filter>
    <filter-name>HiddenHttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>HiddenHttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

---

# **后台代码实现**

```java
@RequestMapping(value = "/user", method = RequestMethod.PUT)
public String updateUser(User user) {
    System.out.println("修改用户信息：" + user);
    return "success";
}
// 这里的写法格式没有问题，但业务逻辑其实大有问题，下面再详细说
@RequestMapping(value = "/user", method = RequestMethod.DELETE)
public String deleteUser(User user) {
    System.out.println("删除用户信息：" + user);
    return "success";
}
```

---

# **前台测试代码**

在添加用户的表单基础上，添加隐藏域`<input type="hidden" name="_method" value="put">`

```html
<form th:action="@{/restfulcontroller/user}" method="post">
    <input type="hidden" name="_method" value="put">
    用户名：<input type="text" name="username"><br/>
    密码：<input type="password" name="password"><br/>
    性别：<input type="radio" name="gender" value="male">男<input type="radio" name="gender" value="female">女<br/>
    年龄：<input type="number" name="age"><br/>
    邮箱：<input type="text" name="email"><br/>
    <input type="submit" value="修改用户">
</form>
<hr/>
<!-- 这里的写法格式没有问题，但业务逻辑其实大有问题，下面再详细说 -->
<form th:action="@{/restfulcontroller/user}" method="post">
    <input type="hidden" name="_method" value="delete">
    用户名：<input type="text" name="username"><br/>
    密码：<input type="password" name="password"><br/>
    性别：<input type="radio" name="gender" value="male">男<input type="radio" name="gender" value="female">女<br/>
    年龄：<input type="number" name="age"><br/>
    邮箱：<input type="text" name="email"><br/>
    <input type="submit" value="删除用户">
</form>
```

---

# **测试结果**

修改用户

![[1755504967896_0dTluxxXSr.gif]]

删除用户

![[1755504967896_Yu4kmFtX8A.gif]]

---

# **后台日志信息**

```shell
修改用户信息：User{username='user', password='11111', gender='female', age='1', email='111@qq.com'}
删除用户信息：User{username='user', password='11111', gender='female', age='1', email='111@qq.com'}
```

到这里，应该需要指明的是我们在设计`RESTful`实现时，对删除用户信息的要求下面这样的

|RESTful 路径|请求方式|操作|
|---|---|---|
|`/user/1`|`DELETE`|根据用户ID删除用户信息|

换句话说，这里应该通过超链接而非表单形式，即通过用户ID来对用户信息进行删除操作。而一般情况下，我们是通过行编辑删除某一行数据，或是通过选中表单的数据来进行批量删除，这些功能在详细案例时会详细介绍